; Listing generated by Microsoft (R) Optimizing Compiler Version 19.29.30148.0 

include listing.inc

INCLUDELIB OLDNAMES

PUBLIC	??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@	; `string'
PUBLIC	??_C@_0BG@EGPLLKFF@CInternalSetLastError@	; `string'
PUBLIC	??_C@_0BL@GKPHBNOH@Current?5Caesium?5Error?3?5?$CFs?6@ ; `string'
PUBLIC	??_C@_0BF@KJCPEOKA@Caesium?5callstack?3?5?6@	; `string'
PUBLIC	??_C@_0BG@LOCNEPBC@CALLSTACK?5?$FL?$CF02d?$FN?3?5?$CFs?6@ ; `string'
PUBLIC	??_C@_0BG@DCEFHGBJ@CInternalGetLastError@	; `string'
EXTRN	__imp_strcpy_s:PROC
EXTRN	__imp___stdio_common_vfprintf:PROC
EXTRN	__imp_MessageBoxA:PROC
EXTRN	__imp___acrt_iob_func:PROC
COMM	?_OptionsStorage@?1??__local_stdio_scanf_options@@9@9:QWORD							; `__local_stdio_scanf_options'::`2'::_OptionsStorage
COMM	?_OptionsStorage@?1??__local_stdio_printf_options@@9@9:QWORD							; `__local_stdio_printf_options'::`2'::_OptionsStorage
_DATA	ENDS
;	COMDAT ??_C@_0BG@DCEFHGBJ@CInternalGetLastError@
CONST	SEGMENT
??_C@_0BG@DCEFHGBJ@CInternalGetLastError@ DB 'CInternalGetLastError', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@LOCNEPBC@CALLSTACK?5?$FL?$CF02d?$FN?3?5?$CFs?6@
CONST	SEGMENT
??_C@_0BG@LOCNEPBC@CALLSTACK?5?$FL?$CF02d?$FN?3?5?$CFs?6@ DB 'CALLSTACK ['
	DB	'%02d]: %s', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BF@KJCPEOKA@Caesium?5callstack?3?5?6@
CONST	SEGMENT
??_C@_0BF@KJCPEOKA@Caesium?5callstack?3?5?6@ DB 'Caesium callstack: ', 0aH
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@GKPHBNOH@Current?5Caesium?5Error?3?5?$CFs?6@
CONST	SEGMENT
??_C@_0BL@GKPHBNOH@Current?5Caesium?5Error?3?5?$CFs?6@ DB 'Current Caesiu'
	DB	'm Error: %s', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@EGPLLKFF@CInternalSetLastError@
CONST	SEGMENT
??_C@_0BG@EGPLLKFF@CInternalSetLastError@ DB 'CInternalSetLastError', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@
CONST	SEGMENT
??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@ DB 'Caesium Fatal Error', 00H ; `string'
PUBLIC	CInternalSetLastError
PUBLIC	fprintf
PUBLIC	_vfprintf_l
PUBLIC	__local_stdio_printf_options
PUBLIC	CInternalErrorPopup
PUBLIC	CInternalGetLastError
;	COMDAT pdata
pdata	SEGMENT
$pdata$CInternalSetLastError DD imagerel $LN25
	DD	imagerel $LN25+409
	DD	imagerel $unwind$CInternalSetLastError
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$fprintf DD imagerel $LN6@fprintf
	DD	imagerel $LN6@fprintf+69
	DD	imagerel $unwind$fprintf
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$_vfprintf_l DD imagerel $LN4@vfprintf_l
	DD	imagerel $LN4@vfprintf_l+68
	DD	imagerel $unwind$_vfprintf_l
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$CInternalGetLastError DD imagerel $LN15
	DD	imagerel $LN15+210
	DD	imagerel $unwind$CInternalGetLastError
;	COMDAT xdata
xdata	SEGMENT
$unwind$CInternalGetLastError DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$_vfprintf_l DQ 00009640f00060f01r	; 1.30596e-308
	DQ	0700b520f0008340fr		; 5.30195e+231
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$fprintf DQ 07012521600041601r		; 7.11078e+231
	DD	030106011H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$CInternalSetLastError DD 0a1a01H
	DD	09741aH
	DD	08641aH
	DD	07541aH
	DD	06341aH
	DD	0e016321aH
; Function compile flags: /Ogtpy
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
;	COMDAT CInternalGetLastError
_TEXT	SEGMENT
errBuffer$ = 48
maxSize$dead$ = 56
CInternalGetLastError PROC				; COMDAT

; 39   : void CInternalGetLastError(PCHAR errBuffer, SIZE_T maxSize) {

$LN15:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
; File C:\Bailey\Programming\Caesium\csmint.c

; 9    : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	mov	eax, DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 39   : void CInternalGetLastError(PCHAR errBuffer, SIZE_T maxSize) {

	mov	rbx, rcx
; File C:\Bailey\Programming\Caesium\csmint.c

; 9    : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	cmp	eax, 128				; 00000080H
	jb	SHORT $LN7@CInternalG
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 9    : 	MessageBoxA(NULL, message, "Caesium Fatal Error", MB_OK);

	xor	r9d, r9d
	lea	r8, OFFSET FLAT:??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@
	lea	rdx, OFFSET FLAT:??_C@_0BL@ELEHMINF@Faulty?5FuncNameStack?5State@
	xor	ecx, ecx
	call	QWORD PTR __imp_MessageBoxA
	mov	eax, DWORD PTR _csmint+1224
$LN7@CInternalG:
; File C:\Bailey\Programming\Caesium\csmint.c

; 12   : 	_csmint.funcNameStack[_csmint.funcNameStackPtr] = funcname;

	lea	rcx, OFFSET FLAT:??_C@_0BG@DCEFHGBJ@CInternalGetLastError@
	lea	rdi, OFFSET FLAT:_csmint
	mov	QWORD PTR [rdi+rax*8+200], rcx
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 40   : 	_CSyncEnter();

	lea	rcx, OFFSET FLAT:_csmint+32
; File C:\Bailey\Programming\Caesium\csmint.c

; 13   : 	_csmint.funcNameStackPtr++;

	inc	DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 40   : 	_CSyncEnter();

	call	QWORD PTR __imp_EnterCriticalSection

; 41   : 	if (_csmint.lastError != NULL)

	mov	r8, QWORD PTR _csmint+16
	test	r8, r8
	je	SHORT $LN2@CInternalG

; 42   : 		strcpy_s(errBuffer, maxSize, _csmint.lastError);

	mov	edx, 255				; 000000ffH
	mov	rcx, rbx
	call	QWORD PTR __imp_strcpy_s
$LN2@CInternalG:
; File C:\Bailey\Programming\Caesium\csmint.c

; 18   : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	mov	eax, DWORD PTR _csmint+1224
	cmp	eax, 128				; 00000080H
	jb	SHORT $LN12@CInternalG
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 9    : 	MessageBoxA(NULL, message, "Caesium Fatal Error", MB_OK);

	xor	r9d, r9d
	lea	r8, OFFSET FLAT:??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@
	lea	rdx, OFFSET FLAT:??_C@_0BL@ELEHMINF@Faulty?5FuncNameStack?5State@
	xor	ecx, ecx
	call	QWORD PTR __imp_MessageBoxA
	mov	eax, DWORD PTR _csmint+1224
$LN12@CInternalG:
; File C:\Bailey\Programming\Caesium\csmint.c

; 21   : 	_csmint.funcNameStack[_csmint.funcNameStackPtr] = NULL;

	mov	QWORD PTR [rdi+rax*8+200], 0
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 43   : 	_CSyncLeave();

	lea	rcx, OFFSET FLAT:_csmint+32
; File C:\Bailey\Programming\Caesium\csmint.c

; 23   : 	_csmint.funcNameStackPtr--;

	dec	DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 44   : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi

; 43   : 	_CSyncLeave();

	rex_jmp	QWORD PTR __imp_LeaveCriticalSection
CInternalGetLastError ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
; File C:\Bailey\Programming\Caesium\csmint.c
; File C:\Bailey\Programming\Caesium\csmint_error.c
;	COMDAT CInternalSetLastError
_TEXT	SEGMENT
lastError$ = 48
CInternalSetLastError PROC				; COMDAT

; 12   : void  CInternalSetLastError(PCHAR lastError) {

$LN25:
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rbp
	mov	QWORD PTR [rsp+24], rsi
	mov	QWORD PTR [rsp+32], rdi
	push	r14
	sub	rsp, 32					; 00000020H
; File C:\Bailey\Programming\Caesium\csmint.c

; 9    : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	mov	eax, DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 12   : void  CInternalSetLastError(PCHAR lastError) {

	mov	rbp, rcx
; File C:\Bailey\Programming\Caesium\csmint.c

; 9    : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	cmp	eax, 128				; 00000080H
	jb	SHORT $LN11@CInternalS
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 9    : 	MessageBoxA(NULL, message, "Caesium Fatal Error", MB_OK);

	xor	r9d, r9d
	lea	r8, OFFSET FLAT:??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@
	lea	rdx, OFFSET FLAT:??_C@_0BL@ELEHMINF@Faulty?5FuncNameStack?5State@
	xor	ecx, ecx
	call	QWORD PTR __imp_MessageBoxA
	mov	eax, DWORD PTR _csmint+1224
$LN11@CInternalS:
; File C:\Bailey\Programming\Caesium\csmint.c

; 12   : 	_csmint.funcNameStack[_csmint.funcNameStackPtr] = funcname;

	lea	rcx, OFFSET FLAT:??_C@_0BG@EGPLLKFF@CInternalSetLastError@
	lea	r14, OFFSET FLAT:_csmint
	mov	QWORD PTR [r14+rax*8+200], rcx
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 13   : 	_CSyncEnter();

	lea	rcx, OFFSET FLAT:_csmint+32
; File C:\Bailey\Programming\Caesium\csmint.c

; 13   : 	_csmint.funcNameStackPtr++;

	inc	DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 13   : 	_CSyncEnter();

	call	QWORD PTR __imp_EnterCriticalSection

; 14   : 	
; 15   : 	// free last memory if applicable
; 16   : 	if (_csmint.lastError != NULL)

	mov	rcx, QWORD PTR _csmint+16
	test	rcx, rcx
	je	SHORT $LN5@CInternalS

; 17   : 		CInternalFree(_csmint.lastError);

	call	CInternalFree
$LN5@CInternalS:

; 18   : 
; 19   : 	// get string size and realloc lastError to len + 1 (for NULL character)
; 20   : 	const SIZE_T strSize = strlen(lastError);

	mov	rbx, -1
	npad	6
$LL22@CInternalS:
	inc	rbx
	cmp	BYTE PTR [rbx+rbp], 0
	jne	SHORT $LL22@CInternalS

; 21   : 	_csmint.lastError = CInternalAlloc(strSize + 1);

	lea	rcx, QWORD PTR [rbx+1]
	call	CInternalAlloc

; 22   : 
; 23   : 	// copy string
; 24   : 	COPY_BYTES(lastError, _csmint.lastError, strSize);

	mov	rdi, rax
	mov	QWORD PTR _csmint+16, rax
	mov	rcx, rbx
	mov	rsi, rbp
	rep movsb

; 25   : 
; 26   : 	// log if needed
; 27   : 	if (_csmint.logErrors != NULL) {

	cmp	DWORD PTR _csmint+24, 0
	je	SHORT $LN23@CInternalS

; 28   : 		fprintf(stderr, "Current Caesium Error: %s\n", lastError);

	mov	ecx, 2
	call	QWORD PTR __imp___acrt_iob_func
	mov	r8, rbp
	lea	rdx, OFFSET FLAT:??_C@_0BL@GKPHBNOH@Current?5Caesium?5Error?3?5?$CFs?6@
	mov	rcx, rax
	call	fprintf

; 29   : 		fprintf(stderr, "Caesium callstack: \n");

	mov	ecx, 2
	call	QWORD PTR __imp___acrt_iob_func
	mov	rcx, rax
	lea	rdx, OFFSET FLAT:??_C@_0BF@KJCPEOKA@Caesium?5callstack?3?5?6@
	call	fprintf

; 30   : 		for (UINT32 stackID = 0; stackID <= _csmint.funcNameStackPtr; stackID++) {

	xor	esi, esi
	npad	10
$LL4@CInternalS:

; 31   : 			fprintf(stderr, "CALLSTACK [%02d]: %s\n", stackID, _csmint.funcNameStack[stackID]);

	mov	ecx, 2
	call	QWORD PTR __imp___acrt_iob_func
	mov	r9, QWORD PTR [r14+rsi*8+200]
	lea	rdx, OFFSET FLAT:??_C@_0BG@LOCNEPBC@CALLSTACK?5?$FL?$CF02d?$FN?3?5?$CFs?6@
	mov	rcx, rax
	mov	r8d, esi
	call	fprintf
	mov	eax, DWORD PTR _csmint+1224
	inc	esi
	cmp	esi, eax
	jbe	SHORT $LL4@CInternalS

; 25   : 
; 26   : 	// log if needed
; 27   : 	if (_csmint.logErrors != NULL) {

	jmp	SHORT $LN3@CInternalS
$LN23@CInternalS:
	mov	eax, DWORD PTR _csmint+1224
$LN3@CInternalS:
; File C:\Bailey\Programming\Caesium\csmint.c

; 18   : 	if (_csmint.funcNameStackPtr >= CSMINT_FUNCNAMESTACK_SIZE)

	cmp	eax, 128				; 00000080H
	jb	SHORT $LN16@CInternalS
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 9    : 	MessageBoxA(NULL, message, "Caesium Fatal Error", MB_OK);

	xor	r9d, r9d
	lea	r8, OFFSET FLAT:??_C@_0BE@EKMGEMPI@Caesium?5Fatal?5Error@
	lea	rdx, OFFSET FLAT:??_C@_0BL@ELEHMINF@Faulty?5FuncNameStack?5State@
	xor	ecx, ecx
	call	QWORD PTR __imp_MessageBoxA
	mov	eax, DWORD PTR _csmint+1224
$LN16@CInternalS:
; File C:\Bailey\Programming\Caesium\csmint.c

; 21   : 	_csmint.funcNameStack[_csmint.funcNameStackPtr] = NULL;

	mov	QWORD PTR [r14+rax*8+200], 0
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 36   : 	_CSyncLeave();

	lea	rcx, OFFSET FLAT:_csmint+32
; File C:\Bailey\Programming\Caesium\csmint.c

; 23   : 	_csmint.funcNameStackPtr--;

	dec	DWORD PTR _csmint+1224
; File C:\Bailey\Programming\Caesium\csmint_error.c

; 37   : }

	mov	rbx, QWORD PTR [rsp+48]
	mov	rbp, QWORD PTR [rsp+56]
	mov	rsi, QWORD PTR [rsp+64]
	mov	rdi, QWORD PTR [rsp+72]
	add	rsp, 32					; 00000020H
	pop	r14

; 36   : 	_CSyncLeave();

	rex_jmp	QWORD PTR __imp_LeaveCriticalSection
CInternalSetLastError ENDP
_TEXT	ENDS
END
